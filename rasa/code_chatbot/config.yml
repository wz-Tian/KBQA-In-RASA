# Configuration for Rasa NLU.
# https://rasa.com/docs/rasa/nlu/components/
language: zh

pipeline:
   - name: JiebaTokenizer
     dictionary_path: "dictionary/"
     # Flag to check whether to split intents
     "intent_tokenization_flag": False
     # Symbol on which intent should be split
     "intent_split_symbol": "_"
     # Regular expression to detect tokens
     "token_pattern": None

   - name: RegexFeaturizer
     use_word_boundaries: False
     use_lookup_tables: True
     use_regexes: True
   - name: LexicalSyntacticFeaturizer
   - name: LanguageModelFeaturizer
     model_name: bert
     model_weights: bert-base-chinese
   - name: DIETClassifier

     epochs: 300
     batch_size: 32
     learning_rate: 0.001

   - name: RegexEntityExtractor  #当nlu中使用了查找表或者正则字段提取实体时，需要添加RegexEntityExtractor
       # 区分大小写
     case_sensitive: False
       # 是否使用查找表
     use_lookup_tables: True
       # 是否使用正则匹配
     use_regexes: True
       # 单词边界，中文没有空格，需要设置为false
     use_word_boundaries: False

   - name: EntitySynonymMapper
   - name: ResponseSelector
     epochs: 100
   - name: FallbackClassifier
     threshold: 0.3
     ambiguity_threshold: 0.1

policies:
   - name: MemoizationPolicy
   - name: TEDPolicy
     max_history: 5
     epochs: 100
   - name: RulePolicy
   - name: "FallbackPolicy"
     nlu_threshold: 0.4
     core_threshold: 0.3
     fallback_action_name: "my_fallback_action"